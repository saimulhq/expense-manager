# Expense Manager - A simple CRUD Application using golang, grpc, grpc-gateway and mongoDB

## Dependencies

- Go
- MongoDB
- Protocol Buffer Compiler
  (Available releases for installation https://github.com/protocolbuffers/protobuf/releases)

\*\* The configuration of the project can be modified from the "config.json" file.

# Instructions for running the project locally:

1. Clone the project in the "$GOPATH/src/" folder
2. Change the directory of the project folder using the following command:

```
cd expense-manager
```

2. Run the following command to run the project:

```
go run server/main.go
```

3. After running the project, you can access the following:

- grpc server running on localhost:50507, can be tested by importing the "expense.proto" using "Bloom RPC (A GUI client for grpc services)"

- http server running on localhost:8090, the endpoints can be accessed using Postman/Curl:

\*\* The same is also available from Swagger (localhost:8090/swagger-ui/).

i. POST Request to create a new expense:

localhost:8090/v1/expenses

Request Body: JSON

Example Request Body:

```
{
  "expense": {
    "title": "Tomato",
    "description": "Fresh tomotoes bought from Prisma",
    "amount": 2,
    "price": 20,
    "date": "2021-07-01T16:00:00Z"
  }
}
```

Expected Response:

```
{
  "id": "60ddc683bee8161536746b40",
  "expense": {
    "title": "Tomato",
    "description": "Fresh tomotoes bought from Prisma",
    "amount": 2,
    "price": 20,
    "date": "2021-07-01T16:00:00Z"
  }
}
```

\*\* Here \_id represents the expense id and is auto generated by MongoDB.

ii. GET Request to get the information of all expenses

localhost:8090/v1/expenses

Expected Response:

```
{
  "expense": [
    {
      "id": "60ddc683bee8161536746b40",
      "title": "Tomato",
      "description": "Fresh tomotoes bought from Prisma",
      "amount": 2,
      "price": 20,
      "date": "2021-07-01T16:00:00Z"
    },
    {
      "id": "60ddc6dfbee8161536746b41",
      "title": "Onions",
      "description": "Fresh onions bought from LIDL",
      "amount": 3,
      "price": 60,
      "date": "2021-07-01T16:20:00Z"
    }
  ]
}
```

iii. GET Request to get the information of an expense by expense id:

localhost:8090/v1/expenses/60ddc6dfbee8161536746b41

Expected Response:

```
{
  "id": "60ddc6dfbee8161536746b41",
  "expense": {
    "title": "Onions",
    "description": "Fresh onions bought from LIDL",
    "amount": 3,
    "price": 60,
    "date": "2021-07-01T16:20:00Z"
  }
}
```

iv. PATCH Request to update the information of an expense using the expense id:

localhost:8090/v1/expenses/60ddc6dfbee8161536746b41

Request Body: JSON

Example Request Body:

```
{
  "title": "Onions medium",
  "description": "Exchanged regular onions with medium ones from LIDL",
  "amount": 3,
  "price": 60,
  "date": "2021-07-01T17:34:00Z"
}
```

Expected Response:

```
{
  "id": "60ddc6dfbee8161536746b41",
  "expense": {
    "title": "Onions medium",
    "description": "Exchanged regular onions with medium ones from LIDL",
    "amount": 3,
    "price": 60,
    "date": "2021-07-01T17:34:00Z"
  }
}
```

v. DELETE Request to delete an expense by id:

localhost:8090/v1/expenses/60ddc6dfbee8161536746b41

Expected Response:

```
{
  "id": "60ddc6dfbee8161536746b41"
}
```

In order to exit the application, press CTRL+C from the keyboard in the terminal where the application is running.

\*\* The file "run.sh" can be used to regenerate stubs and swagger from the proto file.
